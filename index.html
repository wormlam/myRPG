<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>簡易 RPG</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="startScreen">
    <h1 class="title">⚔️ 簡易 RPG</h1>
    <button class="menu-btn" id="btnStartGame">開始遊戲</button>
    <button class="menu-btn" id="btnLoadStart">讀取</button>
  </div>

  <div id="gameScreen">
  <h1 class="game-title">簡易 RPG</h1>
  <div class="game-layout">
  <aside class="player-panel">
    <div class="panel">
      <h3>冒險者</h3>
      <div class="stats">
        <span class="stat">Lv.<span id="playerLevel">1</span></span>
        <span class="stat">攻擊: <span id="playerAtk">5</span></span>
        <span class="stat">金幣: <span id="gold">0</span></span>
      </div>
      <div class="stat-with-bar">
        <span class="stat">HP: <span id="playerHp">20</span>/<span id="playerMaxHp">20</span></span>
        <div class="hp-bar"><div class="hp-fill" id="playerHpBar" style="width:100%"></div></div>
      </div>
      <div class="stat-with-bar">
        <span class="stat">MP: <span id="playerMp">10</span>/<span id="playerMaxMp">10</span></span>
        <div class="hp-bar"><div class="hp-fill" id="playerMpBar" style="width:100%;background:linear-gradient(90deg,#9b59b6,#8e44ad)"></div></div>
      </div>
      <div class="stat-with-bar">
        <span class="stat">經驗: <span id="playerExp">0</span>/<span id="playerExpNeed">10</span></span>
        <div class="hp-bar"><div class="hp-fill" id="playerExpBar" style="width:0%;background:linear-gradient(90deg,#4ecca3,#2ecc71)"></div></div>
      </div>
    </div>
  </aside>
  <main class="game-main">
  <div id="mapPanel" class="panel map-panel">
    <h3>地圖</h3>
    <div id="mapGrid" class="map-grid"></div>
    <p class="move-hint">移動：方向鍵或 WASD｜戰鬥：Z 攻擊 X 魔法 C 防禦 V 逃跑</p>
  </div>

  <div id="combatPanel" class="panel combat-panel" style="display:none">
    <h3>戰鬥指令</h3>
    <div class="combat-scene">
      <div class="combat-sprite combat-enemy" id="enemySprite">
        <div class="enemy-nameplate">
          <span class="nameplate-name" id="enemyName">史萊姆</span>
          <span class="nameplate-stats">HP <span id="enemyHp">8</span>/<span id="enemyMaxHp">8</span> · 攻 <span id="enemyAtk">2</span></span>
        </div>
        <div class="enemy-hp-bar">
          <div class="hp-bar"><div class="hp-fill" id="enemyHpBar" style="width:100%;background:#e94560"></div></div>
        </div>
        <span class="sprite-emoji" id="enemyEmoji">🟢</span>
      </div>
      <div class="combat-sprite combat-player" id="playerSprite">
        <div class="player-nameplate">
          <span class="nameplate-name" id="combatPlayerName">冒險者</span>
          <span class="nameplate-stats">HP <span id="combatPlayerHp">20</span>/<span id="combatPlayerMaxHp">20</span> · MP <span id="combatPlayerMp">10</span>/<span id="combatPlayerMaxMp">10</span> · 攻 <span id="combatPlayerAtk">5</span></span>
        </div>
        <div class="player-hp-bar">
          <div class="hp-bar"><div class="hp-fill" id="combatPlayerHpBar" style="width:100%"></div></div>
        </div>
        <div class="player-mp-bar">
          <div class="hp-bar"><div class="hp-fill" id="combatPlayerMpBar" style="width:100%;background:linear-gradient(90deg,#9b59b6,#8e44ad)"></div></div>
        </div>
        <span class="sprite-emoji" id="playerEmoji">🧑</span>
      </div>
    </div>
    <div class="combat-actions">
      <button id="btnAttack">⚔️ 攻擊 (Z)</button>
      <button id="btnMagic">✨ 魔法 (X)</button>
      <button id="btnDefend">🛡️ 防禦 (C)</button>
      <button id="btnEscape">🏃 逃跑 (V)</button>
    </div>
  </div>

  <div id="logPanel" class="panel" style="display:none">
    <h3>戰鬥紀錄</h3>
    <div id="log"></div>
  </div>
  </main>
  <aside class="sidebar">
    <h3>選單</h3>
    <button class="menu-option" id="menuHeal">💚 治療 (5金)</button>
    <button class="menu-option" id="menuSave">💾 儲存</button>
    <button class="menu-option" id="menuLoad">📂 讀取</button>
    <button class="menu-option" id="menuBack">🏠 返回主畫面</button>
  </aside>
  </div>
  </div>

  <div id="slotModal" class="modal">
    <div class="modal-content">
      <h3 id="slotModalTitle">選擇欄位</h3>
      <div class="modal-slots" id="modalSlots"></div>
      <button class="modal-close" id="btnCloseModal">關閉</button>
    </div>
  </div>

  <script src="js/config.js"></script>
  <script src="js/state.js"></script>
  <script src="js/utils.js"></script>
  <script src="js/map.js"></script>
  <script src="js/combat.js"></script>
  <script src="js/save.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/main.js"></script>
</body>
</html>
